<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Debug</title>
    <style>
        body { font-family: system-ui; padding: 20px; }
        .info { margin: 10px 0; padding: 10px; background: #f0f0f0; border-radius: 4px; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>主题调试工具</h1>

    <div class="info">
        <strong>当前主题:</strong> <span id="current-theme">--</span>
    </div>

    <div class="info">
        <strong>localStorage 主题:</strong> <span id="storage-theme">--</span>
    </div>

    <div class="info">
        <strong>HTML class:</strong> <span id="html-class">--</span>
    </div>

    <div class="info">
        <strong>Body arco-theme:</strong> <span id="body-arco">--</span>
    </div>

    <button onclick="checkTheme()">刷新检查</button>
    <button onclick="setDark()">设置暗色</button>
    <button onclick="setLight()">设置浅色</button>
    <button onclick="clearStorage()">清除缓存</button>

    <script>
        function checkTheme() {
            document.getElementById('current-theme').textContent =
                localStorage.getItem('theme') || 'null';
            document.getElementById('storage-theme').textContent =
                localStorage.getItem('theme') || 'null';
            document.getElementById('html-class').textContent =
                document.documentElement.className || 'none';
            document.getElementById('body-arco').textContent =
                document.body.getAttribute('arco-theme') || 'none';
        }

        function setDark() {
            localStorage.setItem('theme', 'dark');
            document.documentElement.classList.add('dark');
            document.body.setAttribute('arco-theme', 'dark');
            checkTheme();
            alert('已设置暗色模式，请刷新主应用页面');
        }

        function setLight() {
            localStorage.setItem('theme', 'light');
            document.documentElement.classList.remove('dark');
            document.body.removeAttribute('arco-theme');
            checkTheme();
            alert('已设置浅色模式，请刷新主应用页面');
        }

        function clearStorage() {
            localStorage.removeItem('theme');
            checkTheme();
            alert('已清除主题缓存');
        }

        // 自动检查
        setInterval(checkTheme, 1000);
        checkTheme();
    </script>
</body>
</html>
